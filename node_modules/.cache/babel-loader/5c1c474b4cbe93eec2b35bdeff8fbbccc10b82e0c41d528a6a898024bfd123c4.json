{"ast":null,"code":"import { CakeType } from \"constants/CakeType\";\nimport { ServerCakeType } from \"constants/ServerCakeType\";\nconst baseShippingFee = Number(process.env.REACT_APP_BASE_SHIPPING_FEE) || 49;\nconst amountFreeShipping = Number(process.env.REACT_APP_AMOUNT_FREE_SHIPPING) || 20;\nexport const getDataSendingToAnotherPage = (items, orderNumber, amount, price) => {\n  const mappedItems = items.filter(item => orderNumber[item.id] > 0).map(item => {\n    return {\n      id: item.id,\n      name: item.name,\n      type: item.type,\n      value: orderNumber[item.id],\n      price: item.price\n    };\n  });\n  return {\n    mooncakeData: mappedItems,\n    amount: amount,\n    price: price,\n    shippingFee: getShippingFee(amount)\n  };\n};\nconst getShippingFee = amount => {\n  if (amount.piece >= amountFreeShipping) {\n    return 0;\n  }\n  const sum = amount.piece + amount.smallPiece + amount.set * 3;\n  if (sum <= 4) {\n    return baseShippingFee;\n  }\n  if (sum >= 20) {\n    return 0;\n  }\n  return baseShippingFee + (sum - 4) * 5;\n};\nexport const getClientCakeType = type => {\n  switch (type) {\n    case ServerCakeType.SmallPiece:\n      return CakeType.SmallPiece;\n    case ServerCakeType.Set:\n      return CakeType.Set;\n    case ServerCakeType.Piece:\n    default:\n      return CakeType.Piece;\n  }\n};","map":{"version":3,"names":["CakeType","ServerCakeType","baseShippingFee","Number","process","env","REACT_APP_BASE_SHIPPING_FEE","amountFreeShipping","REACT_APP_AMOUNT_FREE_SHIPPING","getDataSendingToAnotherPage","items","orderNumber","amount","price","mappedItems","filter","item","id","map","name","type","value","mooncakeData","shippingFee","getShippingFee","piece","sum","smallPiece","set","getClientCakeType","SmallPiece","Set","Piece"],"sources":["/Users/green3rd/Documents/Git/catalogue/src/CatalogPage/mapper.ts"],"sourcesContent":["import { CakeType } from \"constants/CakeType\";\nimport { ServerCakeType } from \"constants/ServerCakeType\";\nimport {\n  MooncakeAmount,\n  MooncakeData,\n  OrderSummaryPageProps,\n} from \"OrderSummaryPage/type\";\nimport {\n  MooncakeModel,\n} from \"shared/utils/callServer/type\";\n\nconst baseShippingFee = Number(process.env.REACT_APP_BASE_SHIPPING_FEE) || 49\nconst amountFreeShipping = Number(process.env.REACT_APP_AMOUNT_FREE_SHIPPING) || 20\n\nexport const getDataSendingToAnotherPage = (\n  items: MooncakeModel[],\n  orderNumber: number[],\n  amount: MooncakeAmount,\n  price: number,\n): OrderSummaryPageProps => {\n  const mappedItems: MooncakeData[] = items\n    .filter((item) => orderNumber[item.id] > 0)\n    .map((item) => {\n      return {\n        id: item.id,\n        name: item.name,\n        type: item.type,\n        value: orderNumber[item.id],\n        price: item.price\n      };\n    });\n\n  return {\n    mooncakeData: mappedItems,\n    amount: amount,\n    price: price,\n    shippingFee: getShippingFee(amount),\n  };\n};\n\nconst getShippingFee = (amount: MooncakeAmount): number => {\n  if (amount.piece >= amountFreeShipping) {\n    return 0;\n  }\n\n  const sum = amount.piece + amount.smallPiece + amount.set * 3;\n  if (sum <= 4) {\n    return baseShippingFee;\n  }\n\n  if (sum >= 20) {\n    return 0;\n  }\n\n  return baseShippingFee + (sum - 4) * 5;\n};\n\nexport const getClientCakeType = (type: ServerCakeType): CakeType => {\n  switch (type) {\n    case ServerCakeType.SmallPiece:\n      return CakeType.SmallPiece;\n    case ServerCakeType.Set:\n      return CakeType.Set;\n    case ServerCakeType.Piece:\n    default:\n      return CakeType.Piece;\n  }\n};\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,cAAc,QAAQ,0BAA0B;AAUzD,MAAMC,eAAe,GAAGC,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,2BAA2B,CAAC,IAAI,EAAE;AAC7E,MAAMC,kBAAkB,GAAGJ,MAAM,CAACC,OAAO,CAACC,GAAG,CAACG,8BAA8B,CAAC,IAAI,EAAE;AAEnF,OAAO,MAAMC,2BAA2B,GAAGA,CACzCC,KAAsB,EACtBC,WAAqB,EACrBC,MAAsB,EACtBC,KAAa,KACa;EAC1B,MAAMC,WAA2B,GAAGJ,KAAK,CACtCK,MAAM,CAAEC,IAAI,IAAKL,WAAW,CAACK,IAAI,CAACC,EAAE,CAAC,GAAG,CAAC,CAAC,CAC1CC,GAAG,CAAEF,IAAI,IAAK;IACb,OAAO;MACLC,EAAE,EAAED,IAAI,CAACC,EAAE;MACXE,IAAI,EAAEH,IAAI,CAACG,IAAI;MACfC,IAAI,EAAEJ,IAAI,CAACI,IAAI;MACfC,KAAK,EAAEV,WAAW,CAACK,IAAI,CAACC,EAAE,CAAC;MAC3BJ,KAAK,EAAEG,IAAI,CAACH;IACd,CAAC;EACH,CAAC,CAAC;EAEJ,OAAO;IACLS,YAAY,EAAER,WAAW;IACzBF,MAAM,EAAEA,MAAM;IACdC,KAAK,EAAEA,KAAK;IACZU,WAAW,EAAEC,cAAc,CAACZ,MAAM;EACpC,CAAC;AACH,CAAC;AAED,MAAMY,cAAc,GAAIZ,MAAsB,IAAa;EACzD,IAAIA,MAAM,CAACa,KAAK,IAAIlB,kBAAkB,EAAE;IACtC,OAAO,CAAC;EACV;EAEA,MAAMmB,GAAG,GAAGd,MAAM,CAACa,KAAK,GAAGb,MAAM,CAACe,UAAU,GAAGf,MAAM,CAACgB,GAAG,GAAG,CAAC;EAC7D,IAAIF,GAAG,IAAI,CAAC,EAAE;IACZ,OAAOxB,eAAe;EACxB;EAEA,IAAIwB,GAAG,IAAI,EAAE,EAAE;IACb,OAAO,CAAC;EACV;EAEA,OAAOxB,eAAe,GAAG,CAACwB,GAAG,GAAG,CAAC,IAAI,CAAC;AACxC,CAAC;AAED,OAAO,MAAMG,iBAAiB,GAAIT,IAAoB,IAAe;EACnE,QAAQA,IAAI;IACV,KAAKnB,cAAc,CAAC6B,UAAU;MAC5B,OAAO9B,QAAQ,CAAC8B,UAAU;IAC5B,KAAK7B,cAAc,CAAC8B,GAAG;MACrB,OAAO/B,QAAQ,CAAC+B,GAAG;IACrB,KAAK9B,cAAc,CAAC+B,KAAK;IACzB;MACE,OAAOhC,QAAQ,CAACgC,KAAK;EACzB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}