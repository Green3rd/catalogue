{"ast":null,"code":"var _jsxFileName = \"/Users/green3rd/Documents/Git/catalogue/src/OrderSummaryPage/OrderSummaryPage.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./OrderSummaryPage.scss\";\nimport { FormButton } from \"shared/Component/FormButton/FormButton\";\nimport { routeName } from \"config/routeConfig\";\nimport { getDiscountPrice, getRandomSatang } from \"./mapper\";\nimport { getBoxNumber, setBoxNumberToStorage, setIsSubmitToStorage, setRandomSatangToStorage } from \"shared/utils/localstorage\";\nimport { goToHomePage } from \"shared/utils/historyUtils\";\nimport { OrderSummary } from \"shared/Component/OrderSummary/OrderSummary\";\nimport { CommonPage } from \"shared/Component/CommonPage/CommonPage\";\nimport { getPercentDiscount } from \"shared/utils/callServer/callServer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AMOUNT_IN_BOX = {\n  small: 2,\n  big: 4\n};\nconst OrderSummaryPageComponent = props => {\n  _s();\n  const [pageProps, setPageProps] = React.useState();\n  const [boxNumber, setBoxNumber] = React.useState(getBoxNumber());\n  const [totalPieceInBox, setTotalPieceInBox] = React.useState(0);\n  const [percentDiscount, setPercentDiscount] = React.useState({\n    id: 0,\n    discount: 0\n  });\n  const [finalPrice, setFinalPrice] = React.useState(0);\n  React.useEffect(() => {\n    if (!props.location.state) {\n      goToHomePage(props.history);\n      return;\n    }\n    setPageProps(props.location.state);\n    setRandomSatangToStorage(getRandomSatang());\n    getPercentDiscount({}).then(result => {\n      if (result && result.data && result.data.id) {\n        setPercentDiscount(result.data);\n      }\n    });\n  }, []);\n  React.useEffect(() => {\n    if (!pageProps) {\n      return;\n    }\n    setFinalPrice(getDiscountPrice(pageProps.price, percentDiscount.discount) + pageProps.shippingFee);\n  }, [pageProps, percentDiscount.discount]);\n  if (!pageProps) {\n    return null;\n  }\n  const goToNextPage = () => {\n    setBoxNumberToStorage(boxNumber);\n    setIsSubmitToStorage(false);\n    const nextPageProps = {\n      ...pageProps,\n      percentDiscount,\n      finalPrice,\n      smallBox: boxNumber[0],\n      bigBox: boxNumber[1]\n    };\n    props.history.push({\n      pathname: routeName.AddressPage,\n      state: nextPageProps\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CommonPage, {\n    headerText: \"Order Summary\",\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(OrderSummary, {\n        mooncakeData: pageProps.mooncakeData,\n        amount: pageProps.amount,\n        shippingFee: pageProps.shippingFee\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormButton, {\n        text: \"\\u0E2A\\u0E31\\u0E48\\u0E07\\u0E0B\\u0E37\\u0E49\\u0E2D\",\n        onClick: goToNextPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderSummaryPageComponent, \"/BB2WLagg48wb8QitBA1KqreDJ0=\");\n_c = OrderSummaryPageComponent;\nconst OrderSummaryPage = withRouter(OrderSummaryPageComponent);\n_c2 = OrderSummaryPage;\nOrderSummaryPage.displayName = \"OrderSummaryPage\";\nexport { OrderSummaryPage };\nvar _c, _c2;\n$RefreshReg$(_c, \"OrderSummaryPageComponent\");\n$RefreshReg$(_c2, \"OrderSummaryPage\");","map":{"version":3,"names":["React","withRouter","FormButton","routeName","getDiscountPrice","getRandomSatang","getBoxNumber","setBoxNumberToStorage","setIsSubmitToStorage","setRandomSatangToStorage","goToHomePage","OrderSummary","CommonPage","getPercentDiscount","jsxDEV","_jsxDEV","Fragment","_Fragment","AMOUNT_IN_BOX","small","big","OrderSummaryPageComponent","props","_s","pageProps","setPageProps","useState","boxNumber","setBoxNumber","totalPieceInBox","setTotalPieceInBox","percentDiscount","setPercentDiscount","id","discount","finalPrice","setFinalPrice","useEffect","location","state","history","then","result","data","price","shippingFee","goToNextPage","nextPageProps","smallBox","bigBox","push","pathname","AddressPage","headerText","children","mooncakeData","amount","fileName","_jsxFileName","lineNumber","columnNumber","text","onClick","_c","OrderSummaryPage","_c2","displayName","$RefreshReg$"],"sources":["/Users/green3rd/Documents/Git/catalogue/src/OrderSummaryPage/OrderSummaryPage.tsx"],"sourcesContent":["import React from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport \"./OrderSummaryPage.scss\";\nimport { OrderSummaryPageProps } from \"./type\";\nimport { FormButton } from \"shared/Component/FormButton/FormButton\";\nimport { ItemCard } from \"shared/Component/ItemCard/ItemCard\";\nimport { CakeType } from \"constants/CakeType\";\nimport { routeName } from \"config/routeConfig\";\nimport { getDiscountPrice, getMaxBoxNumber, getRandomSatang } from \"./mapper\";\nimport {\n  getBoxNumber,\n  setBoxNumberToStorage,\n  setIsSubmitToStorage,\n  setRandomSatangToStorage,\n} from \"shared/utils/localstorage\";\nimport { goToHomePage } from \"shared/utils/historyUtils\";\nimport { OrderSummary } from \"shared/Component/OrderSummary/OrderSummary\";\nimport { CommonPage } from \"shared/Component/CommonPage/CommonPage\";\nimport { PriceSection } from \"../shared/Component/PriceSection/PriceSection\";\nimport { getPercentDiscount } from \"shared/utils/callServer/callServer\";\nimport { AddressPageProps } from \"AddressPage/AddressPage\";\nimport { GetPercentDiscountResponse } from \"shared/utils/callServer/type\";\n\ntype Props = RouteComponentProps;\n\nconst AMOUNT_IN_BOX = {\n  small: 2,\n  big: 4,\n};\n\nconst OrderSummaryPageComponent: React.FC<Props> = (props) => {\n  const [pageProps, setPageProps] = React.useState<OrderSummaryPageProps>();\n  const [boxNumber, setBoxNumber] = React.useState(getBoxNumber());\n  const [totalPieceInBox, setTotalPieceInBox] = React.useState(0);\n  const [percentDiscount, setPercentDiscount] =\n    React.useState<GetPercentDiscountResponse>({\n      id: 0,\n      discount: 0,\n    });\n  const [finalPrice, setFinalPrice] = React.useState(0);\n\n  React.useEffect(() => {\n    if (!props.location.state) {\n      goToHomePage(props.history);\n      return;\n    }\n    setPageProps(props.location.state as OrderSummaryPageProps);\n    setRandomSatangToStorage(getRandomSatang());\n    getPercentDiscount({}).then((result) => {\n      if (result && result.data && result.data.id) {\n        setPercentDiscount(result.data);\n      }\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (!pageProps) {\n      return;\n    }\n    setFinalPrice(\n      getDiscountPrice(pageProps.price, percentDiscount.discount) +\n        pageProps.shippingFee\n    );\n  }, [pageProps, percentDiscount.discount]);\n\n  if (!pageProps) {\n    return null;\n  }\n\n  const goToNextPage = () => {\n    setBoxNumberToStorage(boxNumber);\n    setIsSubmitToStorage(false);\n    const nextPageProps: AddressPageProps = {\n      ...pageProps,\n      percentDiscount,\n      finalPrice,\n      smallBox: boxNumber[0],\n      bigBox: boxNumber[1],\n    };\n    props.history.push({\n      pathname: routeName.AddressPage,\n      state: nextPageProps,\n    });\n  };\n\n  return (\n    <CommonPage headerText=\"Order Summary\">\n      <>\n        <OrderSummary\n          mooncakeData={pageProps.mooncakeData}\n          amount={pageProps.amount}\n          shippingFee={pageProps.shippingFee}\n        />\n        <FormButton text=\"สั่งซื้อ\" onClick={goToNextPage} />\n      </>\n    </CommonPage>\n  );\n};\n\nconst OrderSummaryPage = withRouter(OrderSummaryPageComponent);\nOrderSummaryPage.displayName = \"OrderSummaryPage\";\n\nexport { OrderSummaryPage };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}