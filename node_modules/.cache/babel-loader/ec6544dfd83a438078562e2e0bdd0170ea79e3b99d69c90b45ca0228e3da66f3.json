{"ast":null,"code":"var _jsxFileName = \"/Users/green3rd/Documents/Git/catalogue/src/LoginPage/LoginForm/LoginForm.tsx\";\nimport React from \"react\";\nimport { Form, withFormik } from \"formik\";\nimport { initLoginFormValue, validateLoginSchema } from \"./validation\";\nimport { withRouter } from \"react-router\";\nimport { login } from \"shared/utils/callServer/callServer\";\nimport { ErrorMessage } from \"shared/utils/message\";\nimport { FormInput } from \"shared/Component/FormInput/FormInput\";\nimport { FormButton } from \"shared/Component/FormButton/FormButton\";\nimport \"./LoginForm.scss\";\nimport { routeName } from \"config/routeConfig\";\nimport { setTokenToStorage } from \"shared/utils/localstorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginFormComponent = props => {\n  const {\n    isSubmitting,\n    errorText\n  } = props;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    className: \"LoginForm\",\n    children: [/*#__PURE__*/_jsxDEV(FormInput, {\n      label: \"Email\",\n      name: \"username\",\n      type: \"email\",\n      error: !!props.errors.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormButton, {\n      text: \"Login\",\n      disabled: isSubmitting,\n      errorText: errorText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 5\n  }, this);\n};\n_c = LoginFormComponent;\nconst LoginForm = withRouter(withFormik({\n  mapPropsToValues: initLoginFormValue,\n  validationSchema: validateLoginSchema,\n  handleSubmit: (values, {\n    props,\n    setSubmitting\n  }) => {\n    // send a request to a server\n    login(values).then(result => {\n      setSubmitting(false);\n      if (!result || !result.data || !result.data.token) {\n        props.onFormError(ErrorMessage.cannotGetData);\n        return;\n      }\n      setTokenToStorage(result.data.token);\n      props.onFormError(\"\");\n      props.history.push({\n        pathname: routeName.AdminPage\n      });\n      return;\n    }, error => {\n      props.onFormError(error && error.message);\n      setSubmitting(false);\n    });\n  },\n  displayName: \"LoginForm\"\n})(LoginFormComponent));\nLoginForm.displayName = \"LoginForm\";\nexport { LoginForm };\nvar _c;\n$RefreshReg$(_c, \"LoginFormComponent\");","map":{"version":3,"names":["React","Form","withFormik","initLoginFormValue","validateLoginSchema","withRouter","login","ErrorMessage","FormInput","FormButton","routeName","setTokenToStorage","jsxDEV","_jsxDEV","LoginFormComponent","props","isSubmitting","errorText","className","children","label","name","type","error","errors","username","fileName","_jsxFileName","lineNumber","columnNumber","text","disabled","_c","LoginForm","mapPropsToValues","validationSchema","handleSubmit","values","setSubmitting","then","result","data","token","onFormError","cannotGetData","history","push","pathname","AdminPage","message","displayName","$RefreshReg$"],"sources":["/Users/green3rd/Documents/Git/catalogue/src/LoginPage/LoginForm/LoginForm.tsx"],"sourcesContent":["import React from \"react\";\nimport { Form, FormikProps, withFormik } from \"formik\";\nimport { initLoginFormValue, validateLoginSchema } from \"./validation\";\nimport { withRouter, RouteComponentProps } from \"react-router\";\nimport { login } from \"shared/utils/callServer/callServer\";\nimport { ErrorMessage } from \"shared/utils/message\";\nimport { LoginFormValues } from \"./types\";\nimport { FormInput } from \"shared/Component/FormInput/FormInput\";\nimport { FormButton } from \"shared/Component/FormButton/FormButton\";\nimport \"./LoginForm.scss\";\nimport { routeName } from \"config/routeConfig\";\nimport { setTokenToStorage } from \"shared/utils/localstorage\";\n\ninterface OwnProps {\n  errorText?: string;\n  onFormError: (error: string) => void;\n}\n\ntype Props = OwnProps & RouteComponentProps & FormikProps<LoginFormValues>;\nconst LoginFormComponent: React.FC<Props> = (props) => {\n  const { isSubmitting, errorText } = props;\n\n  return (\n    <Form className=\"LoginForm\">\n      <FormInput\n        label=\"Email\"\n        name=\"username\"\n        type=\"email\"\n        error={!!props.errors.username}\n      />\n      <FormButton text=\"Login\" disabled={isSubmitting} errorText={errorText} />\n    </Form>\n  );\n};\n\nconst LoginForm = withRouter(\n  withFormik<OwnProps & RouteComponentProps, LoginFormValues>({\n    mapPropsToValues: initLoginFormValue,\n    validationSchema: validateLoginSchema,\n    handleSubmit: (values: LoginFormValues, { props, setSubmitting }) => {\n      // send a request to a server\n      login(values).then(\n        (result) => {\n          setSubmitting(false);\n\n          if (!result || !result.data || !result.data.token) {\n            props.onFormError(ErrorMessage.cannotGetData);\n            return;\n          }\n          setTokenToStorage(result.data.token);\n          props.onFormError(\"\");\n          props.history.push({\n            pathname: routeName.AdminPage,\n          });\n          return;\n        },\n        (error) => {\n          props.onFormError(error && error.message);\n          setSubmitting(false);\n        }\n      );\n    },\n    displayName: \"LoginForm\",\n  })(LoginFormComponent)\n);\n\nLoginForm.displayName = \"LoginForm\";\nexport { LoginForm };\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,EAAeC,UAAU,QAAQ,QAAQ;AACtD,SAASC,kBAAkB,EAAEC,mBAAmB,QAAQ,cAAc;AACtE,SAASC,UAAU,QAA6B,cAAc;AAC9D,SAASC,KAAK,QAAQ,oCAAoC;AAC1D,SAASC,YAAY,QAAQ,sBAAsB;AAEnD,SAASC,SAAS,QAAQ,sCAAsC;AAChE,SAASC,UAAU,QAAQ,wCAAwC;AACnE,OAAO,kBAAkB;AACzB,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,iBAAiB,QAAQ,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQ9D,MAAMC,kBAAmC,GAAIC,KAAK,IAAK;EACrD,MAAM;IAAEC,YAAY;IAAEC;EAAU,CAAC,GAAGF,KAAK;EAEzC,oBACEF,OAAA,CAACZ,IAAI;IAACiB,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACzBN,OAAA,CAACL,SAAS;MACRY,KAAK,EAAC,OAAO;MACbC,IAAI,EAAC,UAAU;MACfC,IAAI,EAAC,OAAO;MACZC,KAAK,EAAE,CAAC,CAACR,KAAK,CAACS,MAAM,CAACC;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC,eACFhB,OAAA,CAACJ,UAAU;MAACqB,IAAI,EAAC,OAAO;MAACC,QAAQ,EAAEf,YAAa;MAACC,SAAS,EAAEA;IAAU;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrE,CAAC;AAEX,CAAC;AAACG,EAAA,GAdIlB,kBAAmC;AAgBzC,MAAMmB,SAAS,GAAG5B,UAAU,CAC1BH,UAAU,CAAkD;EAC1DgC,gBAAgB,EAAE/B,kBAAkB;EACpCgC,gBAAgB,EAAE/B,mBAAmB;EACrCgC,YAAY,EAAEA,CAACC,MAAuB,EAAE;IAAEtB,KAAK;IAAEuB;EAAc,CAAC,KAAK;IACnE;IACAhC,KAAK,CAAC+B,MAAM,CAAC,CAACE,IAAI,CACfC,MAAM,IAAK;MACVF,aAAa,CAAC,KAAK,CAAC;MAEpB,IAAI,CAACE,MAAM,IAAI,CAACA,MAAM,CAACC,IAAI,IAAI,CAACD,MAAM,CAACC,IAAI,CAACC,KAAK,EAAE;QACjD3B,KAAK,CAAC4B,WAAW,CAACpC,YAAY,CAACqC,aAAa,CAAC;QAC7C;MACF;MACAjC,iBAAiB,CAAC6B,MAAM,CAACC,IAAI,CAACC,KAAK,CAAC;MACpC3B,KAAK,CAAC4B,WAAW,CAAC,EAAE,CAAC;MACrB5B,KAAK,CAAC8B,OAAO,CAACC,IAAI,CAAC;QACjBC,QAAQ,EAAErC,SAAS,CAACsC;MACtB,CAAC,CAAC;MACF;IACF,CAAC,EACAzB,KAAK,IAAK;MACTR,KAAK,CAAC4B,WAAW,CAACpB,KAAK,IAAIA,KAAK,CAAC0B,OAAO,CAAC;MACzCX,aAAa,CAAC,KAAK,CAAC;IACtB,CACF,CAAC;EACH,CAAC;EACDY,WAAW,EAAE;AACf,CAAC,CAAC,CAACpC,kBAAkB,CACvB,CAAC;AAEDmB,SAAS,CAACiB,WAAW,GAAG,WAAW;AACnC,SAASjB,SAAS;AAAG,IAAAD,EAAA;AAAAmB,YAAA,CAAAnB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}